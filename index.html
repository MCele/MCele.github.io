<!DOCTYPE html>
<html>
    <head>
        <title> The Island </title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" src="js/phaser.min.js"></script>

    </head>
    <body>
	<script type="text/javascript">
		var game = new Phaser.Game(1150, 650, Phaser.AUTO, '', { preload: preload, create: create, update: update });

		function preload() {
			game.load.image('bosq', 'assets/fondo.jpg');
			game.load.spritesheet('john', 'assets/dragon4.png', 207, 300);
		        game.load.spritesheet('dragon', 'assets/dragon5.png', 207, 300);
                        game.load.image('cereza', 'assets/cereza.png');
                        game.load.spritesheet('planta_c','assets/planta_carnivora.png',78,152);
                        game.load.spritesheet('abeja','assets/abeja.png',98,101);
		}

		function create() {
                    game.physics.startSystem(Phaser.Physics.ARCADE);
                    //  A simple background for our game
                    // fondo
                    fondo=game.add.sprite(0, 0, 'bosq');
                    fondo.scale.setTo(1.2,1.2);
                    // frutas
                    fruta=game.add.sprite(300,400,'cereza');
                    fruta.scale.setTo(0.2,0.2);

                    // planta carnivora
                    planta_c = game.add.sprite(600,402,'planta_c');
                    //planta_c.scale.setTo(0.4,0.4);
                    game.physics.arcade.enable(planta_c);
                    planta_c.animations.add('comer', [0, 1, 2, 1, 0], 4, true);


                    // dragon
                    //jug = new dragon(game,0,500,'ninja',cursors);
                    dragon = game.add.sprite(60, 200, 'dragon');
                    game.physics.arcade.enable(dragon);

                    dragon.animations.add('volar', [16, 17, 18, 19, 20, 21, 22, 23], 4, true);
                    dragon.animations.add('caminar', [30, 31, 32, 33, 34], 4, true);
                    dragon.animations.add('saltar', [24, 25, 26, 27, 28, 29], 5, true);
                    dragon.animations.add('saltoVuelo', [ 1, 2, 3, 5, 25, 5], 4, false,true);
                    dragon.animations.add('bajarVuelo', [26, 27, 28, 29], 4, false,true);
                    dragon.animations.add('atacar', [4, 5, 6, 7, 8, 9, 10], 4, true);
                    dragon.animations.add('estar', [0, 1, 2, 3, 2, 34, 33, 32, 33], 4, false);

                    // john
                    john = game.add.sprite(400, 200, 'john');
                    john.scale.setTo(0.4,0.4);
                    game.physics.arcade.enable(john);
                    //john.animations.add('volar', [16, 17, 18, 19, 20, 21, 22, 23], 4, true);
                    john.animations.add('derecha', [0, 1, 2, 3, 4, 5, 6, 7], 4, true);
                    john.animations.add('izquierda', [8, 9, 10, 11, 12, 13, 14, 15], 4, true);
                    //dragon.animations.add('saltoVuelo', [ 1, 2, 3, 5, 25, 5], 4, false,true);
                    //dragon.animations.add('bajarVuelo', [26, 27, 28, 29], 4, false,true);
                    //dragon.animations.add('atacar', [4, 5, 6, 7, 8, 9, 10], 4, true);
                    //dragon.animations.add('estar', [0, 1, 2, 3, 2, 34, 33, 32, 33], 4, false);
                    //jumpButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);
                    // john
                    abeja = game.add.sprite(200, 200, 'abeja');
                    abeja.animations.add('volar',[3,4,5,6],6,true);
                    game.physics.arcade.enable(abeja);
                    cursors = game.input.keyboard.createCursorKeys();//para habilitar las flechas
		}

		function update() {
                    dragon.body.velocity.x = 0;
                    dragon.body.velocity.y = 0;
		    planta_c.body.velocity.x = 0;
                    planta_c.body.velocity.y = 0;
                    abeja.body.velocity.x = 30;
                    abeja.body.velocity.y = 0;
                    console.log(john);console.log(dragon);console.log(planta_c);
                    dragon.animations.play('volar');
                    abeja.animations.play('volar');
                    planta_c.animations.play('comer');
                    if (cursors.right.isDown){
                        john.animations.play('derecha');
                    }
                }
	</script>
    </body>
</html>
